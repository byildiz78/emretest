DECLARE @ciro DECIMAL(18,2)
select 
@ciro=SUM(p.AmountPaid)
from OrderPayments p
where p.PaymentDateTime between @date1 and @date2
and p.LineDeleted=0
--and h.@BranchID

select 
pt.PaymentType  as TÄ°P,
ROUND(SUM(AmountPaid),2) as Tutar,@ciro as ciro,ROUND((SUM(AmountPaid)*100)/@ciro,2) as Oran  from OrderPayments p
LEFT JOIN PaymentTypes pt on pt.PaymentMethodName=p.PaymentMethodName
where PaymentDateTime BETWEEN @date1 and @date2 and p.LineDeleted=0 and p.@BranchID 
GROUP BY pt.PaymentType