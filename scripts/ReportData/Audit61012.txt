DECLARE @amountDue FLOAT;
SET @amountDue=(
SELECT round((isnull((SUM(h.AmountDue)),0.0)),2) AS reportValue
FROM OrderHeaders AS h WITH(NOLOCK)
WHERE h.OrderDateTime between @date1 and @date2
AND h.@BranchID
AND h.linedeleted=0
);
SELECT 
round((isnull((@amountDue / nullif(SUM(t.Quantity),0)),0.0)),2) AS ortciro
FROM OrderTransactions AS t WITH(NOLOCK)
INNER JOIN OrderHeaders AS h ON t.OrderKey = h.OrderKey 
INNER JOIN posProducts as m on m.ProductKey=t.MenuItemKey 
WHERE t.OrderDateTime between @date1 and @date2
AND t.@BranchID
AND h.linedeleted=0
AND t.LineDeleted=0
and m.CustomField12='TABAKLAR'