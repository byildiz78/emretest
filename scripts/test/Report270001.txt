Detail|
SELECT efr_Branchs.BranchName AS SUBE,
      ROUND( SUM(orderheaders.AmountDue  ) + SUM(orderheaders.DiscountTotalAmount),2  ) AS [Bürüt Ciro],
            ROUND(  SUM(orderheaders.DiscountTotalAmount  ),2) AS [İNDİRİM TOPLAMI],
      ROUND(   SUM(orderheaders.AmountDue),2) AS [NET CİRO],
 ROUND(sum(orderheaders.SalesTaxAmount),2) AS [TOPLAM KDV],
 
  ROUND(  CASE WHEN 
    SUM(orderheaders.AmountDue) - sum(orderheaders.SalesTaxAmount) >0 THEN SUM(orderheaders.AmountDue) - sum(orderheaders.SalesTaxAmount)
    
    
   WHEN  SUM(orderheaders.AmountDue) - sum(orderheaders.SalesTaxAmount)<=0 THEN 0 
    END 
    ,2)
    
    
    AS [KDV HARİÇ NET CİRO]
 
FROM   OrderHeaders
      
       LEFT OUTER JOIN efr_Branchs
            ON  OrderHeaders.BranchID = efr_Branchs.BranchID
            
            WHERE OrderHeaders.OrderDateTime>=@date1 AND OrderHeaders.OrderDateTime<=@date2 AND OrderHeaders.LineDeleted=0
            
          AND  OrderHeaders.@BranchID

GROUP BY
       efr_Branchs.BranchName

            

       