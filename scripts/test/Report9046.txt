

SELECT  ot.MenuItemGroupText AS Grup,SUM(ot.ExtendedPrice) AS Tutar,
      
       ROUND(
           SUM(ot.ExtendedPrice) / (
               SELECT NULLIF(SUM(ot2.ExtendedPrice), 0)
               FROM   OrderTransactions ot2
               WHERE  ot2.LineDeleted = 0
                      AND ot2.OrderDateTime >= @date1
                      AND ot2.OrderDateTime <= @date2
                      AND ot2.@BranchID
           ) * 100,
           3
       ) AS Yuzde
FROM   OrderTransactions ot
WHERE  ot.LineDeleted = 0
       AND ot.OrderDateTime >= @date1
       AND ot.OrderDateTime <= @date2
       AND ot.@BranchID
GROUP BY
       ot.MenuItemGroupText

order by Yuzde Desc





