DECLARE @startDate DATETIME;set @startDate=GETDATE();
IF DATEPART(hour,@startDate)<6
 set @startDate=DATEADD(dd, -1, DATEDIFF(dd, 0, @startDate))
ELSE
set @startDate=DATEADD(dd, 0, DATEDIFF(dd, 0, @startDate))
SELECT MenuCategories.MenuCategoryText as tipi,SUM(ordertransactions.ExtendedPrice) as tutar
FROM OrderTransactions INNER JOIN
 MenuItems ON OrderTransactions.MenuItemID = MenuItems.MenuItemID AND OrderTransactions.BranchID = MenuItems.BranchID INNER JOIN
 OrderHeaders ON OrderTransactions.BranchID = OrderHeaders.BranchID AND OrderTransactions.OrderID = OrderHeaders.OrderID LEFT OUTER JOIN
 MenuCategories ON OrderTransactions.BranchID = MenuCategories.BranchID AND MenuItems.MenuCategoryID = MenuCategories.MenuCategoryID
Where 
 OrderHeaders.OrderDateTime >=@startDate and OrderTransactions.@BranchID AND OrderHeaders.orderstatus<>'3' 
AND OrderTransactions.TransactionStatus='1'
GROUP BY MenuCategories.MenuCategoryText Order by SUM(ordertransactions.ExtendedPrice) desc