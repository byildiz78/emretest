DECLARE @tabakSayisi FLOAT;

set @tabakSayisi=(
SELECT 
round((isnull((nullif(SUM(t.Quantity),0)),0.0)),0) AS reportValue
FROM OrderTransactions AS t WITH(NOLOCK)
INNER JOIN OrderHeaders AS h WITH (NOLOCK) ON t.OrderKey = h.OrderKey 
INNER JOIN posProducts as m WITH (NOLOCK) on m.ProductKey=t.MenuItemKey 
WHERE t.OrderDateTime between @date1 AND @date2
AND t.@BranchID
AND h.linedeleted=0
AND t.LineDeleted=0
and m.CustomField12='TABAKLAR'
);
SELECT top 1
round((isnull((nullif(SUM(t.Quantity),0)),0.0)),0) AS pakettabak,
round(ISNULL(round(((nullif(SUM(t.Quantity),0))),0)/NULLIF(@tabakSayisi,0),0)*100,2) as tabakoran
FROM OrderTransactions AS t WITH(NOLOCK)
INNER JOIN OrderHeaders AS h WITH (NOLOCK) ON t.OrderKey = h.OrderKey 
INNER JOIN posProducts as m WITH (NOLOCK) on m.ProductKey=t.MenuItemKey 
WHERE t.OrderDateTime between @date1 AND @date2
AND t.@BranchID
and h.OrderType=5
AND h.linedeleted=0
AND t.LineDeleted=0
and m.CustomField12='TABAKLAR'