declare @dates NVARCHAR(MAX) = N''
declare @sumDates NVARCHAR(MAX) = N''

DECLARE @dt1 DATETIME =@date1
DECLARE @dt2 DATETIME =@date2
DECLARE @diff INT = DATEDIFF(DAY, @date1, @date2)


DECLARE @i INT = 0
WHILE(@i < @diff)
BEGIN
	SET @dates = @dates + FORMAT(DATEADD(DAY, @i, @dt1), ',[yyyy-MM-dd]')
	SET @sumDates = @sumDates + FORMAT(DATEADD(DAY, @i, @dt1), '+ ISNULL((SUBSTRING([yyyy-MM-dd],0,3) * 3600 + SUBSTRING([yyyy-MM-dd], 4,2) * 60 + SUBSTRING([yyyy-MM-dd], 7,2)), 0)')
	SET @i = @i + 1
END


SET @dates = STUFF( @dates, 1, 1, '')
SET @sumDates = STUFF( @sumDates, 1, 1, '')


DECLARE @sql NVARCHAR(MAX) = N'

	SELECT
		*,
		 CONVERT(VARCHAR(3), ('+@sumDates+')/ 60 / 60 ) + '':'' + RIGHT(''00'' + CONVERT(VARCHAR(2), ('+@sumDates+')/ 60 % 60), 2) + '':'' +RIGHT(''00'' + CONVERT(VARCHAR(2), ('+@sumDates+')% 60), 2) AS [Toplam]
	FROM 
	(

	SELECT
		br.BranchName AS [Şube Adı] ,
		etc.EmployeeName AS [Ad Soyad],
		FORMAT(etc.WorkDate, ''yyyy-MM-dd'') AS [Tarih],
		CONVERT ( VARCHAR , etc.ClockOutTime - etc.ClockInTime , 108) AS [Çalışma Süresi]
	FROM
		EmployeeTimeCards etc WITH (NOLOCK)
		INNER JOIN efr_Branchs br WITH (NOLOCK) ON etc.BranchID = br.BranchID
	WHERE
		1=1
		AND etc.ClockInTime between @dt1 AND @dt2
		AND etc.@BranchID
	GROUP BY
		FORMAT(etc.WorkDate, ''yyyy-MM-dd''),
		etc.ClockInTime,
		etc.ClockOutTime,
		etc.EmployeeName,
		br.BranchName

	) AS src
	PIVOT (
			MAX([Çalışma Süresi]) FOR [Tarih] IN  ('+@dates+') 
	) AS pvt

'

exec sp_executesql @sql, N'@dt1 DATETIME, @dt2 DATETIME', @dt1, @dt2