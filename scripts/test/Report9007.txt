Detail|
SELECT OrderTransactions.*,
       OrderHeaders.*,
       EmployeeFiles.FirstName,
       EmployeeFiles.LastName
FROM   OrderTransactions
       LEFT OUTER JOIN EmployeeFiles
            ON  OrderTransactions.AddUserıD = EmployeeFiles.EmployeeID
       RIGHT OUTER JOIN OrderHeaders
            ON  OrderTransactions.OrderKey = OrderHeaders.OrderKey
WHERE  OrderTransactions.LineDeleted = 0
       AND orderheaders.OrderDateTime >= @ilkTarih
       AND orderheaders.OrderDateTime <= @SonTarih
       
           
         AND OrderHeaders.@BranchID


$INDIRIMLER|
SELECT (SUM(h.amountdue) + SUM(h.DiscountTotalAmount)) AS 
[Brüt Satışlar],
       SUM(h.DiscountLineAmount) AS [Ürün İndirimleri],
       SUM(h.DiscountCashAmount) AS [Nakit İndirimler],
       SUM(h.DiscountOrderAmount) AS [Çek İndirimler],
       SUM(h.DiscountTotalAmount) AS [Toplam Indirimler],
       SUM(h.amountdue) AS [Net Satışlar],
       COUNT(h.OrderKey) AS [Toplam Çek Sayısı],
       SUM(h.GuestNumber) AS [Toplam Konuk],
       SUM(h.amountdue) / ISNULL(SUM(h.GuestNumber), 1) AS 
[Kişi Başı Ortalama],
       SUM(h.amountdue) / ISNULL(COUNT(h.orderkey), 1) AS 
[Çek Ortalama]
FROM   OrderHeaders h
WHERE  h.LineDeleted = 0
       AND h.OrderDateTime >= @ilkTarih
       AND h.OrderDateTime <= @SonTarih
       and h.@BranchID