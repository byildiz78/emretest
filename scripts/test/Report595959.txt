Detail|
SELECT *
FROM   (
           SELECT YEAR(OrderDateTime) [Year],
                  DATENAME(MONTH, OrderDateTime) [Month],
                  MenuItemText,MenuItemGroupText,
                  ISNULL(SUM(Quantity), 0) AS SaleQuantity
           FROM   OrderTransactions
           WHERE  OrderDateTime >= '1/1/2014' AND LineDeleted=0 AND OrderDateTime>=@date1 AND OrderDateTime<=@date2
AND OrderTransactions.@BranchID
           GROUP BY
                  YEAR(OrderDateTime),
                  MenuItemText,
                  DATENAME(MONTH, OrderDateTime),
                  MenuItemGroupText
       )   
       
                           AS MontlySalesData
                           
                           
       PIVOT(
           SUM(SaleQuantity) 
           FOR MONTH IN ([January], [February], [March], [April], [May], [June], 
                        [July], [August], [September], [October], [November], 
                        [December])
       ) AS MNamePivot


$INDIRIMLER|SELECT 
       SUM(r.[Net Satışlar]) AS [Net Satışlar],
      
       SUM(r.[Toplam Konuk]) AS [Toplam Konuk],

       r.GUN
FROM   (
           SELECT 
                  h.amountdue AS [Net Satışlar],
                 
                  h.GuestNumber AS [Toplam Konuk],
                
                         CASE DATEPART(month, h.OrderDateTime)
                       WHEN 1 THEN '01-OCAK'
                       WHEN 2 THEN '02-ŞUBAT'
                       WHEN 3 THEN '03-MART'
                       WHEN 4 THEN '04-NİSAN'
                       WHEN 5 THEN '05-MAYIS'
                       WHEN 6 THEN '06-HAZİRAN'
                       WHEN 7 THEN '07-TEMMUZ'
                       WHEN 8 THEN '08-AĞUSTOS'
                       WHEN 9 THEN '09-EYLÜL'
                       WHEN 10 THEN '10-EKİM'
                       WHEN 11 THEN '11-KASIM'
                       WHEN 12 THEN '12-ARALIK'
                  END AS GUN
        
           FROM   OrderHeaders h
           WHERE  H.LineDeleted=0
               AND h.OrderDateTime>=  @date1   
AND h.OrderDateTime<=  @date2

and h.@BranchID
       ) AS r
GROUP BY
       R.GUN

ORDER BY  R.GUN DESC