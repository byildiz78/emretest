DECLARE @amountDue FLOAT;

SET @amountDue=(
SELECT round((isnull((SUM(h.AmountDue)),0.0)),2) AS reportValue
FROM OrderHeaders AS h WITH(NOLOCK)
WHERE h.OrderDateTime between @date1 and @date2
AND h.@BranchID
AND h.linedeleted=0
);

SELECT round((isnull((nullif(SUM(t.Quantity),0)),0.0)),0) AS reportValue,
round((isnull((@amountDue / nullif(SUM(t.Quantity),0)),0.0)),2) AS ortciro
FROM OrderTransactions AS t WITH(NOLOCK)
INNER JOIN posProducts as m WITH (NOLOCK) on m.ProductKey=t.MenuItemKey 
WHERE t.OrderDateTime between @date1 and @date2
AND t.@BranchID
AND t.linedeleted=0
and m.CustomField12='TABAKLAR'