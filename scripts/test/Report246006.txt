Detail|SELECT efr_Branchs.BranchName AS [Sube Adı],
 COUNT(OrderHeaders.OrderKey) AS [TOPLAM ADET],
 ROUND(SUM(OrderHeaders.AmountDue), 2) AS [TOPLAM CİRO],
 COUNT(h1.OrderKey) AS [MASA ADET],SUM(h1.AmountDue) AS [MASA CİRO],
 COUNT(h2.OrderKey) AS [ALGÖTÜR ADET],SUM(h2.AmountDue) AS [ALGÖTÜR CİRO],
 COUNT(h3.OrderKey) AS [PAKET ADET],SUM(h3.AmountDue) AS [PAKET CİRO] 
FROM OrderHeaders
 LEFT OUTER JOIN efr_Branchs ON OrderHeaders.BranchID = efr_Branchs.BranchID
LEFT OUTER JOIN OrderHeaders as h1 ON h1.OrderKey = OrderHeaders.OrderKey and h1.OrderType=1
LEFT OUTER JOIN OrderHeaders as h2 ON h2.OrderKey = OrderHeaders.OrderKey and h2.OrderType=3
LEFT OUTER JOIN OrderHeaders as h3 ON h3.OrderKey = OrderHeaders.OrderKey and h3.OrderType=5
WHERE (OrderHeaders.LineDeleted = 0)
 AND (OrderHeaders.OrderDateTime >= @date1)
 AND (OrderHeaders.OrderDateTime <= @date2)
 AND OrderHeaders.@BranchID
GROUP BY efr_Branchs.BranchName

ORDER BY SUM(OrderHeaders.AmountDue) DESC