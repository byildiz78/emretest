Detail|
SELECT t.MenuItemText as [Ürün],
 SUM(t.Quantity) AS Adet, 
 CONVERT(dec(10,2),SUM(t.ExtendedPrice))AS Tutar,
 SUM(h.AmountDue) AS [TOPLAM URUNSATIS TL],
 sum(t.ExtendedPrice)/ SUM(nullif(h.AmountDue,0)) AS URUNYUZDE,
 t.MenuItemGroupText as Grup,
 t.MenumItemCategoryText as Kategori,
 t.AddUserName as Personel,
 CASE h.OrderType
 WHEN '1' THEN 'MASA SERVIS'
 WHEN '2' THEN 'İSME ÇEK'
 WHEN '3' THEN 'AL GÖTÜR'
 WHEN '4' THEN 'TEZGAH'
 WHEN '5' THEN 'PAKET SERVIS'
 ELSE 'TANIMSIZ'
 END AS 'Satış Türü'
FROM OrderTransactions AS t
LEFT OUTER JOIN OrderHeaders AS h ON t.OrderKey = h.OrderKey AND h.BranchID = t.BranchID AND h.LineDeleted=0
WHERE t.LineDeleted = 0 AND h.LineDeleted=0
AND t.OrderDateTime >= @date1
AND t.OrderDateTime <= @date2 and t.@BranchID
GROUP BY
 MenuItemText,
 h.OrderType,
 t.ExtendedPrice,
 t.Quantity,
 t.MenuItemGroupText,
 t.MenumItemCategoryText,
 h.AmountDue, t.AddUserName
ORDER BY
 t.MenuItemText ASC