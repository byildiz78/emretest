SELECT 
efr_Branchs.BranchName [ŞUBE],
OrderHeaders.OrderID AS [ÇEK NO],
cast( OrderHeaders.ReceiptNo as  INT )  AS [FİŞ NO],
CONVERT(VARCHAR, OrderHeaders.OrderDateTime ,113) AS [AÇILIŞ TARIHI],
OrderHeaders.PaperNumber as [Adisyon Numarası],
OrderHeaders.DineInTableName as [Masa Numarası],
OrderHeaders.EmployeeName as [İşlemi Yapan Personel Adı],
OrderTransactions.MenuItemText as [Ürün Adı],
OrderTransactions.Quantity as [Ürün Adeti],
OrderHeaders.AmountDue AS [SATIŞ TUTARI],
OrderPayments.AmountPaid AS [ÖDEME TUTARI],
OrderPayments.PaymentMethodName AS [ÖDEME ŞEKLİ], 
CONVERT(VARCHAR, OrderPayments.PaymentDateTime, 113) AS [ÖDEME TARİHİ]
FROM OrderHeaders
LEFT OUTER JOIN OrderPayments
ON OrderHeaders.OrderKey = OrderPayments.OrderKey
LEFT OUTER JOIN OrderTransactions
ON OrderHeaders.OrderKey = OrderTransactions.OrderKey
LEFT OUTER JOIN efr_Branchs
ON OrderHeaders.BranchID = efr_Branchs.BranchID
WHERE OrderPayments.LineDeleted = 0 
AND OrderHeaders.LineDeleted = 0 
AND OrderTransactions.LineDeleted = 0 
AND OrderHeaders.OrderStatus=2
AND OrderPayments.PaymentDateTime>= @date1
AND OrderPayments.PaymentDateTime <= @date2
and OrderHeaders.@BranchID
AND OrderHeaders.PaperNumber is not null

order by OrderHeaders.orderID asc