

SELECT efr_Branchs.BranchName AS Şube,
 OrderTransactions.MenuItemText AS [Ürün Adı],
 OrderTransactions.MenuItemGroupText AS Grubu,
 OrderTransactions.MenumItemCategoryText AS Kategorisi,
 ROUND(SUM(OrderTransactions.Quantity), 3) AS Adet,
 SUM(OrderTransactions.ExtendedPrice) AS Tutar,p.ProductCode AS [Stok Kodu]
FROM OrderTransactions
 LEFT OUTER JOIN efr_Branchs
 ON OrderTransactions.BranchID = efr_Branchs.BranchID
 INNER JOIN GlobalMenuItems AS m ON OrderTransactions.MenuItemKey=m.MenuItemKey AND m.BranchID = efr_Branchs.BranchID
 INNER JOIN posProducts AS p ON p.ProductKey=m.MenuItemGlobalKey
WHERE OrderTransactions.OrderDateTime >= @date1
 AND OrderTransactions.OrderDateTime <= @date2
 AND OrderTransactions.LineDeleted = 0
 AND OrderTransactions.@BranchID
GROUP BY
 OrderTransactions.MenuItemText,
 OrderTransactions.MenuItemGroupText,
 OrderTransactions.MenumItemCategoryText,
 efr_Branchs.BranchName,
 p.ProductCode
 