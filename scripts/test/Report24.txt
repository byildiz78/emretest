Select
MenuItems.MenuItemID as Kodu,
  MenuItems.BranchID As [Şube Kodu],
  (SELECT BranchName FROM efr_Branchs WHERE BranchID=MenuItems.BranchID) As [Şube Adı],
  (Select Top 1
    MenuGroups.MenuGroupText
  From
    MenuGroups
  Where
    MenuGroups.MenuGroupID = MenuItems.MenuGroupID) As Grubu,
  (Select Top 1
    MenuCategories.MenuCategoryText
  From
    MenuCategories
  Where
    MenuCategories.MenuCategoryID = MenuItems.MenuCategoryID) As Kategorisi,
  MenuItems.MenuItemText As Ürün,MenuItems.Barcode as Barkod,
  Round((Sum(OrderTransactions.ExtendedPrice) / Sum(OrderTransactions.Quantity)),2) As
  [Birim Fiyat],
  Round((Sum(OrderTransactions.Quantity)),2) As Adet,
  Round((Sum(OrderTransactions.ExtendedPrice)),2) As [Satış Tutarı]
From
  (MenuItems Inner Join
    OrderTransactions On MenuItems.MenuItemID = OrderTransactions.MenuItemID and MenuItems.BranchID = OrderTransactions.BranchID)
  Inner Join
  OrderHeaders On OrderTransactions.OrderID = OrderHeaders.OrderID and OrderTransactions.BranchID = OrderHeaders.BranchID 
Where 
  OrderHeaders.OrderDateTime<=@sonTarih And
  OrderHeaders.OrderDateTime>=@ilkTarih and OrderTransactions.TransactionStatus='1'
And MenuItems.@BranchID 
Group By
  MenuItems.MenuItemText,MenuItems.MenuCategoryID,MenuItems.MenuGroupID,MenuItems.Barcode, MenuItems.MenuItemID,MenuItems.BranchID