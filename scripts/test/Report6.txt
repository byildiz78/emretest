DECLARE @startDate DATETIME;set @startDate=GETDATE();
IF DATEPART(hour,@startDate)<6
 set @startDate=DATEADD(dd, -1, DATEDIFF(dd, 0, @startDate))
ELSE
set @startDate=DATEADD(dd, 0, DATEDIFF(dd, 0, @startDate))
SELECT efr_Branchs.BranchName AS [Sube Adı], OrderHeaders.OrderDateTime AS Tarih, OrderTransactions.OrderID AS [Çek No], MenuItems.MenuItemText AS Ürün, 
 OrderTransactions.Quantity AS Miktar, OrderTransactions.ExtendedPrice AS Tutar
FROM OrderTransactions INNER JOIN
 OrderHeaders ON OrderTransactions.BranchID = OrderHeaders.BranchID AND OrderTransactions.OrderID = OrderHeaders.OrderID INNER JOIN
 MenuItems ON OrderTransactions.BranchID = MenuItems.BranchID AND OrderTransactions.MenuItemID = MenuItems.MenuItemID INNER JOIN
 efr_Branchs ON OrderTransactions.BranchID = efr_Branchs.BranchID
WHERE (OrderTransactions.TransactionStatus = '1') AND (OrderHeaders.OrderStatus <> '3')
 AND OrderHeaders.OrderDateTime>=@startDate AND OrderTransactions.@BranchID
Order by OrderTransactions.OrderID desc
