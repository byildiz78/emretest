Detail|
SELECT t.MenuItemText AS Ürün,
       SUM(t.Quantity) AS Adet,
      
       CONVERT(dec(10, 2), SUM(t.ExtendedPrice)) AS Tutar,
       SUM(h.AmountDue) AS [TOPLAM URUNSATIS TL],
       isnull(StationSettings.StationName,'Tanımsız') as StationName
FROM  OrderTransactions AS t
       LEFT OUTER JOIN StationSettings
            ON  t.StationID = StationSettings.StationID
       LEFT OUTER JOIN OrderHeaders AS h
            ON  t.OrderKey = h.OrderKey
WHERE  (t.LineDeleted = 0)
       AND (h.LineDeleted = 0)  AND t.OrderDateTime >= @date1
           AND t.OrderDateTime <= @date2 and t.@BranchID
GROUP BY
       t.MenuItemText,
       t.ExtendedPrice,
       t.Quantity,
    
       h.AmountDue,
       StationSettings.StationName
ORDER BY
       Ürün

$INDIRIMLER| SELECT (SUM(h.amountdue) + SUM(h.discountTotalAmount)) AS [Brüt Satışlar],
       SUM(h.DiscountLineAmount) AS [Ürün İndirimleri],
       SUM(h.DiscountCashAmount) AS [Nakit İndirimler],
       SUM(h.DiscountOrderAmount) AS [Çek İndirimler],
       SUM(h.DiscountTotalAmount) AS [Toplam Indirimler],
       SUM(h.amountdue) AS [Net Satışlar],
       COUNT(h.OrderKey) AS [Toplam Çek Sayısı],
       SUM(h.GuestNumber) AS [Toplam Konuk],
       SUM(h.amountdue) / NULLIF(SUM(h.GuestNumber), 0) AS [Kişi Başı Ortalama],
       SUM(h.amountdue) / NULLIF(COUNT(h.orderkey), 0) AS [Çek Ortalama]
FROM   OrderHeaders h
WHERE  h.LineDeleted = 0
       AND h.OrderDateTime >= @date1
       AND h.OrderDateTime <= @date2 and h.@BranchID